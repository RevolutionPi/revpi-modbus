# SPDX-FileCopyrightText: 2024 KUNBUS GmbH
#
# SPDX-License-Identifier: GPL-2.0-or-later

include:
  - project: "revolutionpi/infrastructure/ci-templates"
    file: "base.yml"
  - project: "revolutionpi/infrastructure/ci-templates"
    file: "/reuse-lint.yml"

variables:
  GIT_SUBMODULE_STRATEGY: recursive
  GIT_SUBMODULE_DEPTH: 1

static-analysis:
  stage: lint
  image: snowstep/llvm:bullseye
  tags:
    - self-hosted
    - docker
    - host-amd64
  script:
    - apt update && apt install -y libmodbus-dev libjson-c-dev
    - clang-tidy src/*.c src/*.h -- -IpiControl -std=c99
    
